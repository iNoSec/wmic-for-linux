#!/bin/bash

    sudo aptitude install autoconf && mkdir -p $HOME/wmi && cd $HOME/wmi/ && wget http://www.openvas.org/download/wmi/wmi-1.3.14.tar.bz2 && wget http://www.openvas.org/download/wmi/openvas-wmi-1.3.14.patch && wget http://www.openvas.org/download/wmi/openvas-wmi-1.3.14.patch2 && wget http://www.openvas.org/download/wmi/openvas-wmi-1.3.14.patch3v2 && wget http://www.openvas.org/download/wmi/openvas-wmi-1.3.14.patch4 && wget http://www.openvas.org/download/wmi/openvas-wmi-1.3.14.patch5 && bzip2 -cd wmi-1.3.14.tar.bz2 | tar xf - && cd wmi-1.3.14/ && patch -p1 < $HOME/wmi/openvas-wmi-1.3.14.patch && patch -p1 < $HOME/wmi/openvas-wmi-1.3.14.patch2 && patch -p1 < $HOME/wmi/openvas-wmi-1.3.14.patch3v2 && patch -p1 < $HOME/wmi/openvas-wmi-1.3.14.patch4 && patch -p1 < $HOME/wmi/openvas-wmi-1.3.14.patch5 && sed -i 's/defined @$pidl || die "Failed to parse $idl_file";//g' Samba/source/pidl/pidl && sed -i 's/gnutls_transport_set_lowat(tls->session, 0);/gnutls_record_check_pending(tls->session);/g' Samba/source/lib/tls/tls.c && sed '579d' Samba/source/lib/tls/tls.c && sudo make "CPP=gcc -E -ffreestanding" && sudo cp Samba/source/bin/wmic /usr/local/bin/ && figlet -kc "WMIC is ready!!" 
